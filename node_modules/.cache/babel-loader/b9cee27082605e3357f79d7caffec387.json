{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useCallback, useReducer, useRef, useEffect } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n  return nonDisabledNewIndex === -1 ? baseIndex : nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_ref, _temp) {\n        var _extends2;\n\n        if (_ref === void 0) {\n          _ref = {};\n        }\n\n        var _ref2 = _temp === void 0 ? {} : _temp,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        var _ref3 = _ref,\n            _ref3$refKey = _ref3.refKey,\n            refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n            ref = _ref3.ref,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\"]); // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n\n\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_ref4) {\n        if (_ref4 === void 0) {\n          _ref4 = {};\n        }\n\n        var _ref5 = _ref4,\n            onClick = _ref5.onClick,\n            onPress = _ref5.onPress,\n            onKeyDown = _ref5.onKeyDown,\n            onKeyUp = _ref5.onKeyUp,\n            onBlur = _ref5.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_ref6) {\n        if (_ref6 === void 0) {\n          _ref6 = {};\n        }\n\n        var _ref7 = _ref6,\n            onKeyDown = _ref7.onKeyDown,\n            onBlur = _ref7.onBlur,\n            onChange = _ref7.onChange,\n            onInput = _ref7.onInput,\n            onChangeText = _ref7.onChangeText,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_ref8, _temp2) {\n        var _extends3;\n\n        if (_ref8 === void 0) {\n          _ref8 = {};\n        }\n\n        var _ref9 = _temp2 === void 0 ? {} : _temp2,\n            _ref9$suppressRefErro = _ref9.suppressRefError,\n            suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n        var _ref10 = _ref8,\n            _ref10$refKey = _ref10.refKey,\n            refKey = _ref10$refKey === void 0 ? 'ref' : _ref10$refKey,\n            ref = _ref10.ref,\n            props = _objectWithoutPropertiesLoose(_ref10, [\"refKey\", \"ref\"]);\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_ref11) {\n        var _enabledEventHandlers;\n\n        if (_ref11 === void 0) {\n          _ref11 = {};\n        }\n\n        var _ref12 = _ref11,\n            onMouseMove = _ref12.onMouseMove,\n            onMouseDown = _ref12.onMouseDown,\n            onClick = _ref12.onClick,\n            onPress = _ref12.onPress,\n            index = _ref12.index,\n            _ref12$item = _ref12.item,\n            item = _ref12$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref12$item,\n            rest = _objectWithoutPropertiesLoose(_ref12, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref13) {\n          var selectedItem = _ref13.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref14) {\n          var isOpen = _ref14.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, {}, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200); // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n      /* istanbul ignore if (react-native) */\n\n\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref15 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref15.highlightedIndex;\n\n      var _ref16 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref16.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      this.updateStatus();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref17) {\n  var refKey = _ref17.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref18) {\n  var refKey = _ref18.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nvar defaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.entries(propTypes).forEach(function (_ref2) {\n      var key = _ref2[0];\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction invokeOnChangeHandler(propKey, props, state, changes) {\n  var handler = \"on\" + capitalizeString(propKey) + \"Change\";\n\n  if (props[handler] && changes[propKey] !== undefined && changes[propKey] !== state[propKey]) {\n    props[handler](changes);\n  }\n}\n\nfunction callOnChangeProps(props, state, changes) {\n  Object.keys(state).forEach(function (stateKey) {\n    invokeOnChangeHandler(stateKey, props, state, changes);\n  });\n\n  if (props.onStateChange && changes !== undefined) {\n    props.onStateChange(changes);\n  }\n}\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var enhancedReducer = useCallback(function (state, action) {\n    state = getState(state, action.props);\n    var stateReduceLocal = action.props.stateReducer;\n    var changes = reducer(state, action);\n    var newState = stateReduceLocal(state, _extends({}, action, {\n      changes: changes\n    }));\n    callOnChangeProps(action.props, state, newState);\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(selectedItem) + \" has been selected.\";\n}\n\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\n\nfunction getDefaultValue(props, propKey) {\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue(props, propKey) {\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey);\n}\n\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex; // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n}\n\nvar defaultProps$1 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  /* istanbul ignore else */\n\n\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$1, {}, userProps);\n\n  var items = props.items,\n      itemToString = props.itemToString,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftSelectReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      inputValue = _useEnhancedReducer$.inputValue,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function (action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  };\n  /* Refs */\n\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var isInitialMount = useRef(true);\n  var shouldScroll = useRef(true);\n  var clearTimeout = useRef(null);\n  var mouseAndTouchTrackers = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  var elementIds = useRef(getElementIds(props)); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return environment.document.getElementById(elementIds.current.getItemId(index));\n  };\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Sets cleanup for the keysSoFar after 500ms. */\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMount.current) {\n      clearTimeout.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeout.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n    // istanbul ignore next\n\n\n    if (isOpen && menuRef.current) {\n      menuRef.current.focus(); // Focus toggleButton on close.\n    } else if (environment.document.activeElement === menuRef.current && toggleButtonRef.current) {\n      toggleButtonRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !items.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Add mouse/touch events to document. */\n\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackers.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackers.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, [toggleButtonRef.current, menuRef.current], environment.document)) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackers.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackers.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackers.current.isTouchMove && !targetWithinDownshift(event.target, [toggleButtonRef.current, menuRef.current], environment.document, false)) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n  }); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowDown,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowUp,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    }\n  };\n  var menuKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowDown,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowUp,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownHome,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnd,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: MenuKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnter\n      });\n    },\n    ' ': function _(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownSpaceButton\n      });\n    }\n  }; // Event handlers.\n\n  var menuHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && menuKeyDownHandlers[key]) {\n      menuKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: MenuKeyDownCharacter,\n        key: key,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  };\n\n  var menuHandleBlur = function () {\n    var shouldBlur = !mouseAndTouchTrackers.current.isMouseDown;\n    /* istanbul ignore else */\n\n    if (shouldBlur) {\n      dispatch({\n        type: MenuBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function () {\n    dispatch({\n      type: MenuMouseLeave\n    });\n  };\n\n  var toggleButtonHandleClick = function () {\n    dispatch({\n      type: ToggleButtonClick\n    });\n  };\n\n  var toggleButtonHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && toggleButtonKeyDownHandlers[key]) {\n      toggleButtonKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: ToggleButtonKeyDownCharacter,\n        key: key,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  };\n\n  var itemHandleMouseMove = function (index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function (index) {\n    dispatch({\n      type: ItemClick,\n      index: index\n    });\n  }; // Action functions.\n\n\n  return {\n    // prop getters.\n    getToggleButtonProps: function getToggleButtonProps(_ref3) {\n      var _extends3;\n\n      if (_ref3 === void 0) {\n        _ref3 = {};\n      }\n\n      var _ref4 = _ref3,\n          onClick = _ref4.onClick,\n          onKeyDown = _ref4.onKeyDown,\n          _ref4$refKey = _ref4.refKey,\n          refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n          ref = _ref4.ref,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n      var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends3.id = elementIds.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = isOpen, _extends3['aria-labelledby'] = elementIds.current.labelId + \" \" + elementIds.current.toggleButtonId, _extends3), rest);\n\n      if (!rest.disabled) {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n\n      return toggleProps;\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: elementIds.current.labelId,\n        htmlFor: elementIds.current.toggleButtonId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_ref) {\n      var _extends2;\n\n      if (_ref === void 0) {\n        _ref = {};\n      }\n\n      var _ref2 = _ref,\n          onMouseLeave = _ref2.onMouseLeave,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          onKeyDown = _ref2.onKeyDown,\n          onBlur = _ref2.onBlur,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = elementIds.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.current.labelId, _extends2.tabIndex = -1, _extends2), isOpen && highlightedIndex > -1 && {\n        'aria-activedescendant': elementIds.current.getItemId(highlightedIndex)\n      }, {\n        onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave),\n        onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n        onBlur: callAllEventHandlers(onBlur, menuHandleBlur)\n      }, rest);\n    },\n    getItemProps: function getItemProps(_ref5) {\n      if (_ref5 === void 0) {\n        _ref5 = {};\n      }\n\n      var _ref6 = _ref5,\n          item = _ref6.item,\n          index = _ref6.index,\n          onMouseMove = _ref6.onMouseMove,\n          onClick = _ref6.onClick,\n          rest = _objectWithoutPropertiesLoose(_ref6, [\"item\", \"index\", \"onMouseMove\", \"onClick\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      var itemProps = _extends({\n        role: 'option',\n        'aria-selected': \"\" + (itemIndex === highlightedIndex),\n        id: elementIds.current.getItemId(itemIndex)\n      }, rest);\n\n      if (!rest.disabled) {\n        itemProps.onMouseMove = callAllEventHandlers(onMouseMove, function () {\n          return itemHandleMouseMove(itemIndex);\n        });\n        itemProps.onClick = callAllEventHandlers(onClick, function () {\n          return itemHandleClick(itemIndex);\n        });\n      }\n\n      return itemProps;\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset\n      });\n    },\n    setInputValue: function setInputValue(newInputValue) {\n      dispatch({\n        type: FunctionSetInputValue,\n        inputValue: newInputValue\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n      inputId = _ref.inputId,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n\nvar defaultProps$2 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1\n});\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  /* istanbul ignore else */\n\n\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$2, {}, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      itemToString = props.itemToString,\n      environment = props.environment; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftUseComboboxReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      inputValue = _useEnhancedReducer$.inputValue,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function (action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  };\n  /* Refs */\n\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = [];\n  var shouldScroll = useRef(true);\n  var isInitialMount = useRef(true);\n  var mouseAndTouchTrackers = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  var elementIds = useRef(getElementIds$1(props));\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !itemRefs.current.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(itemRefs.current[highlightedIndex], menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Add mouse/touch events to document. */\n\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackers.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackers.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, [comboboxRef.current, menuRef.current, toggleButtonRef.current], environment.document)) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackers.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackers.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackers.current.isTouchMove && !targetWithinDownshift(event.target, [comboboxRef.current, menuRef.current, toggleButtonRef.current], environment.document, false)) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n  });\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[index];\n  };\n  /* Event handler functions */\n\n\n  var inputKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownArrowDown,\n        shiftKey: event.shiftKey,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownArrowUp,\n        shiftKey: event.shiftKey,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownHome,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownEnd,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: InputKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownEnter,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  }; // Event handlers.\n\n  var inputHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && inputKeyDownHandlers[key]) {\n      inputKeyDownHandlers[key](event);\n    }\n  };\n\n  var inputHandleChange = function (event) {\n    dispatch({\n      type: InputChange,\n      inputValue: event.target.value\n    });\n  };\n\n  var inputHandleBlur = function () {\n    /* istanbul ignore else */\n    if (!mouseAndTouchTrackers.current.isMouseDown) {\n      dispatch({\n        type: InputBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function () {\n    dispatch({\n      type: MenuMouseLeave$1\n    });\n  };\n\n  var itemHandleMouseMove = function (index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove$1,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function (index) {\n    dispatch({\n      type: ItemClick$1,\n      index: index\n    });\n  };\n\n  var toggleButtonHandleClick = function () {\n    dispatch({\n      type: ToggleButtonClick$1\n    });\n\n    if (!isOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }; // returns\n\n\n  return {\n    // prop getters.\n    getItemProps: function getItemProps(_ref3) {\n      var _extends3, _ref5;\n\n      if (_ref3 === void 0) {\n        _ref3 = {};\n      }\n\n      var _ref4 = _ref3,\n          item = _ref4.item,\n          index = _ref4.index,\n          _ref4$refKey = _ref4.refKey,\n          refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n          ref = _ref4.ref,\n          onMouseMove = _ref4.onMouseMove,\n          onClick = _ref4.onClick,\n          onPress = _ref4.onPress,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n        if (itemNode) {\n          itemRefs.current.push(itemNode);\n        }\n      }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === highlightedIndex), _extends3.id = elementIds.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref5 = {\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          itemHandleMouseMove(itemIndex);\n        })\n      }, _ref5[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        itemHandleClick(itemIndex);\n      }), _ref5), {}, rest);\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: elementIds.current.labelId,\n        htmlFor: elementIds.current.inputId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_ref) {\n      var _extends2;\n\n      if (_ref === void 0) {\n        _ref = {};\n      }\n\n      var _ref2 = _ref,\n          onMouseLeave = _ref2.onMouseLeave,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = elementIds.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n    },\n    getInputProps: function getInputProps(_ref8) {\n      var _extends5;\n\n      if (_ref8 === void 0) {\n        _ref8 = {};\n      }\n\n      var _ref9 = _ref8,\n          onKeyDown = _ref9.onKeyDown,\n          onChange = _ref9.onChange,\n          onInput = _ref9.onInput,\n          onBlur = _ref9.onBlur,\n          onChangeText = _ref9.onChangeText,\n          _ref9$refKey = _ref9.refKey,\n          refKey = _ref9$refKey === void 0 ? 'ref' : _ref9$refKey,\n          ref = _ref9.ref,\n          rest = _objectWithoutPropertiesLoose(_ref9, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n      /* istanbul ignore next (preact) */\n\n\n      var onChangeKey = 'onChange';\n      var eventHandlers = {};\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n        inputRef.current = inputNode;\n      }), _extends5.id = elementIds.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.current.menuId, _extends5), isOpen && highlightedIndex > -1 && {\n        'aria-activedescendant': elementIds.current.getItemId(highlightedIndex)\n      }, {\n        'aria-labelledby': elementIds.current.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue\n      }, eventHandlers, {}, rest);\n    },\n    getComboboxProps: function getComboboxProps(_ref10) {\n      var _extends6;\n\n      if (_ref10 === void 0) {\n        _ref10 = {};\n      }\n\n      var _ref11 = _ref10,\n          _ref11$refKey = _ref11.refKey,\n          refKey = _ref11$refKey === void 0 ? 'ref' : _ref11$refKey,\n          ref = _ref11.ref,\n          rest = _objectWithoutPropertiesLoose(_ref11, [\"refKey\", \"ref\"]);\n\n      return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n        comboboxRef.current = comboboxNode;\n      }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIds.current.menuId, _extends6['aria-expanded'] = isOpen, _extends6), rest);\n    },\n    getToggleButtonProps: function getToggleButtonProps(_ref6) {\n      var _extends4;\n\n      if (_ref6 === void 0) {\n        _ref6 = {};\n      }\n\n      var _ref7 = _ref6,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          _ref7$refKey = _ref7.refKey,\n          refKey = _ref7$refKey === void 0 ? 'ref' : _ref7$refKey,\n          ref = _ref7.ref,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends4.id = elementIds.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n        onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n      }), {}, rest);\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu$1\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu$1\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu$1\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex$1,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    setInputValue: function setInputValue(newInputValue) {\n      dispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: newInputValue\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem$1,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset$1\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useSelect };","map":{"version":3,"sources":["E:/D/admin/node_modules/downshift/dist/downshift.esm.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useCallback","useReducer","useRef","useEffect","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","resultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","getItemNodeFromIndex","circular","itemsLastIndex","newIndex","nonDisabledNewIndex","getNextNonDisabledIndex","currentElementNode","hasAttribute","index","_index","targetWithinDownshift","target","downshiftElements","document","checkActiveElement","contextNode","activeElement","cleanupStatus","getStatusDiv","textContent","setStatus","status","documentProp","div","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","process","env","NODE_ENV","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","__proto__","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","previousResultCount","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_extends2","_ref2$suppressRefErro","suppressRefError","_ref3","_ref3$refKey","refKey","rest","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this4","_this$getState3","newHighlightedIndex","End","_this5","_this$getState4","getToggleButtonProps","_ref4","_ref5","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_ref6","_ref7","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_ref8","_temp2","_extends3","_ref9","_ref9$suppressRefErro","_ref10","_ref10$refKey","getItemProps","_ref11","_enabledEventHandlers","_ref12","onMouseMove","onMouseDown","_ref12$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref13","_ref14","_this$getState7","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this6","_this$getState8","_this$getState9","componentDidMount","_this7","validateGetMenuPropsCalledCorrectly","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","prevProps","_ref15","currentHighlightedIndex","_ref16","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","validateControlledUnchanged","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref17","_ref18","refKeySpecified","isComposite","nextProps","warningDescription","propKey","defaultStateValues","getElementIds","toggleButtonId","uniqueId","getItemIndex","getPropTypesValidator","caller","options","entries","checkPropTypes","name","isAcceptedCharacterKey","test","capitalizeString","slice","toUpperCase","invokeOnChangeHandler","changes","handler","callOnChangeProps","stateKey","useEnhancedReducer","reducer","initialState","enhancedReducer","action","stateReduceLocal","newState","_useReducer","dispatch","s","a","getA11ySelectionMessage","selectionParameters","itemToStringLocal","circularNavigation","getDefaultValue","defaultPropKey","getInitialValue","initialPropKey","getInitialState","getHighlightedIndexOnOpen","offset","getItemIndexByCharacterKey","keysSoFar","itemToStringParam","lowerCasedItemStrings","map","toLowerCase","lowerCasedKeysSoFar","isValid","itemString","startsWith","_itemString","array","isRequired","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","getA11yStatusMessage$1","defaultProps$1","MenuKeyDownArrowDown","MenuKeyDownArrowUp","MenuKeyDownEscape","MenuKeyDownHome","MenuKeyDownEnd","MenuKeyDownEnter","MenuKeyDownSpaceButton","MenuKeyDownCharacter","MenuBlur","MenuMouseLeave","ItemMouseMove","ItemClick","ToggleButtonClick","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSelectItem","FunctionSetInputValue","FunctionReset","stateChangeTypes$1","downshiftSelectReducer","lowercasedKey","_lowercasedKey","validatePropTypes","useSelect","userProps","_useEnhancedReducer","_useEnhancedReducer$","dispatchWithoutProps","toggleButtonRef","isInitialMount","mouseAndTouchTrackers","elementIds","outerDispatch","toggleButtonKeyDownHandlers","menuKeyDownHandlers","menuHandleKeyDown","menuHandleBlur","shouldBlur","menuHandleMouseLeave","toggleButtonHandleClick","toggleButtonHandleKeyDown","itemHandleMouseMove","itemHandleClick","_ref4$refKey","toggleProps","toggleButtonNode","labelProps","onMouseLeave","_ref2$refKey","tabIndex","itemProps","newSelectedItem","setInputValue","newInputValue","getElementIds$1","getInitialState$1","defaultInputValue","propTypes$1","defaultProps$2","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownEnter","InputChange","InputBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","ToggleButtonClick$1","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$1","stateChangeTypes$2","downshiftUseComboboxReducer","validatePropTypes$1","useCombobox","itemRefs","inputRef","comboboxRef","_extends5","_ref9$refKey","inputNode","getComboboxProps","_extends6","_ref11$refKey","comboboxNode","_extends4","_ref7$refKey"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useCallback, useReducer, useRef, useEffect } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (node === null) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n  return nonDisabledNewIndex === -1 ? baseIndex : nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift =\n/*#__PURE__*/\nfunction () {\n  var Downshift =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), {}, newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_ref, _temp) {\n        var _extends2;\n\n        if (_ref === void 0) {\n          _ref = {};\n        }\n\n        var _ref2 = _temp === void 0 ? {} : _temp,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        var _ref3 = _ref,\n            _ref3$refKey = _ref3.refKey,\n            refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n            ref = _ref3.ref,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\"]);\n\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_ref4) {\n        if (_ref4 === void 0) {\n          _ref4 = {};\n        }\n\n        var _ref5 = _ref4,\n            onClick = _ref5.onClick,\n            onPress = _ref5.onPress,\n            onKeyDown = _ref5.onKeyDown,\n            onKeyUp = _ref5.onKeyUp,\n            onBlur = _ref5.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if ( _this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_ref6) {\n        if (_ref6 === void 0) {\n          _ref6 = {};\n        }\n\n        var _ref7 = _ref6,\n            onKeyDown = _ref7.onKeyDown,\n            onBlur = _ref7.onBlur,\n            onChange = _ref7.onChange,\n            onInput = _ref7.onInput,\n            onChangeText = _ref7.onChangeText,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_ref8, _temp2) {\n        var _extends3;\n\n        if (_ref8 === void 0) {\n          _ref8 = {};\n        }\n\n        var _ref9 = _temp2 === void 0 ? {} : _temp2,\n            _ref9$suppressRefErro = _ref9.suppressRefError,\n            suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n        var _ref10 = _ref8,\n            _ref10$refKey = _ref10.refKey,\n            refKey = _ref10$refKey === void 0 ? 'ref' : _ref10$refKey,\n            ref = _ref10.ref,\n            props = _objectWithoutPropertiesLoose(_ref10, [\"refKey\", \"ref\"]);\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_ref11) {\n        var _enabledEventHandlers;\n\n        if (_ref11 === void 0) {\n          _ref11 = {};\n        }\n\n        var _ref12 = _ref11,\n            onMouseMove = _ref12.onMouseMove,\n            onMouseDown = _ref12.onMouseDown,\n            onClick = _ref12.onClick,\n            onPress = _ref12.onPress,\n            index = _ref12.index,\n            _ref12$item = _ref12.item,\n            item = _ref12$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref12$item,\n            rest = _objectWithoutPropertiesLoose(_ref12, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, {}, rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref13) {\n          var selectedItem = _ref13.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref14) {\n          var isOpen = _ref14.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, {}, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref15 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref15.highlightedIndex;\n\n      var _ref16 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref16.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if ( this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      this.updateStatus();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref17) {\n  var refKey = _ref17.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref18) {\n  var refKey = _ref18.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nfunction validateControlledUnchanged(prevProps, nextProps) {\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  ['selectedItem', 'isOpen', 'inputValue', 'highlightedIndex'].forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nvar defaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\n\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.entries(propTypes).forEach(function (_ref2) {\n      var key = _ref2[0];\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction invokeOnChangeHandler(propKey, props, state, changes) {\n  var handler = \"on\" + capitalizeString(propKey) + \"Change\";\n\n  if (props[handler] && changes[propKey] !== undefined && changes[propKey] !== state[propKey]) {\n    props[handler](changes);\n  }\n}\n\nfunction callOnChangeProps(props, state, changes) {\n  Object.keys(state).forEach(function (stateKey) {\n    invokeOnChangeHandler(stateKey, props, state, changes);\n  });\n\n  if (props.onStateChange && changes !== undefined) {\n    props.onStateChange(changes);\n  }\n}\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var enhancedReducer = useCallback(function (state, action) {\n    state = getState(state, action.props);\n    var stateReduceLocal = action.props.stateReducer;\n    var changes = reducer(state, action);\n    var newState = stateReduceLocal(state, _extends({}, action, {\n      changes: changes\n    }));\n    callOnChangeProps(action.props, state, newState);\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(selectedItem) + \" has been selected.\";\n}\n\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\n\nfunction getDefaultValue(props, propKey) {\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue(props, propKey) {\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey);\n}\n\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex; // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n}\n\nvar defaultProps$1 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$1, {}, userProps);\n\n  var items = props.items,\n      itemToString = props.itemToString,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftSelectReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      inputValue = _useEnhancedReducer$.inputValue,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function (action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  };\n  /* Refs */\n\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var isInitialMount = useRef(true);\n  var shouldScroll = useRef(true);\n  var clearTimeout = useRef(null);\n  var mouseAndTouchTrackers = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  var elementIds = useRef(getElementIds(props)); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return environment.document.getElementById(elementIds.current.getItemId(index));\n  };\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Sets cleanup for the keysSoFar after 500ms. */\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMount.current) {\n      clearTimeout.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeout.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n    // istanbul ignore next\n\n\n    if (isOpen && menuRef.current) {\n      menuRef.current.focus(); // Focus toggleButton on close.\n    } else if (environment.document.activeElement === menuRef.current && toggleButtonRef.current) {\n      toggleButtonRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !items.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Add mouse/touch events to document. */\n\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackers.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackers.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, [toggleButtonRef.current, menuRef.current], environment.document)) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackers.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackers.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackers.current.isTouchMove && !targetWithinDownshift(event.target, [toggleButtonRef.current, menuRef.current], environment.document, false)) {\n        dispatch({\n          type: MenuBlur\n        });\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n  }); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowDown,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: ToggleButtonKeyDownArrowUp,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    }\n  };\n  var menuKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowDown,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownArrowUp,\n        getItemNodeFromIndex: getItemNodeFromIndex,\n        shiftKey: event.shiftKey\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownHome,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnd,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: MenuKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownEnter\n      });\n    },\n    ' ': function _(event) {\n      event.preventDefault();\n      dispatch({\n        type: MenuKeyDownSpaceButton\n      });\n    }\n  }; // Event handlers.\n\n  var menuHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && menuKeyDownHandlers[key]) {\n      menuKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: MenuKeyDownCharacter,\n        key: key,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  };\n\n  var menuHandleBlur = function () {\n    var shouldBlur = !mouseAndTouchTrackers.current.isMouseDown;\n    /* istanbul ignore else */\n\n    if (shouldBlur) {\n      dispatch({\n        type: MenuBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function () {\n    dispatch({\n      type: MenuMouseLeave\n    });\n  };\n\n  var toggleButtonHandleClick = function () {\n    dispatch({\n      type: ToggleButtonClick\n    });\n  };\n\n  var toggleButtonHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && toggleButtonKeyDownHandlers[key]) {\n      toggleButtonKeyDownHandlers[key](event);\n    } else if (isAcceptedCharacterKey(key)) {\n      dispatch({\n        type: ToggleButtonKeyDownCharacter,\n        key: key,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  };\n\n  var itemHandleMouseMove = function (index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function (index) {\n    dispatch({\n      type: ItemClick,\n      index: index\n    });\n  }; // Action functions.\n\n\n  return {\n    // prop getters.\n    getToggleButtonProps: function getToggleButtonProps(_ref3) {\n      var _extends3;\n\n      if (_ref3 === void 0) {\n        _ref3 = {};\n      }\n\n      var _ref4 = _ref3,\n          onClick = _ref4.onClick,\n          onKeyDown = _ref4.onKeyDown,\n          _ref4$refKey = _ref4.refKey,\n          refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n          ref = _ref4.ref,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n      var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends3.id = elementIds.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = isOpen, _extends3['aria-labelledby'] = elementIds.current.labelId + \" \" + elementIds.current.toggleButtonId, _extends3), rest);\n\n      if (!rest.disabled) {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n\n      return toggleProps;\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: elementIds.current.labelId,\n        htmlFor: elementIds.current.toggleButtonId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_ref) {\n      var _extends2;\n\n      if (_ref === void 0) {\n        _ref = {};\n      }\n\n      var _ref2 = _ref,\n          onMouseLeave = _ref2.onMouseLeave,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          onKeyDown = _ref2.onKeyDown,\n          onBlur = _ref2.onBlur,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = elementIds.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.current.labelId, _extends2.tabIndex = -1, _extends2), isOpen && highlightedIndex > -1 && {\n        'aria-activedescendant': elementIds.current.getItemId(highlightedIndex)\n      }, {\n        onMouseLeave: callAllEventHandlers(onMouseLeave, menuHandleMouseLeave),\n        onKeyDown: callAllEventHandlers(onKeyDown, menuHandleKeyDown),\n        onBlur: callAllEventHandlers(onBlur, menuHandleBlur)\n      }, rest);\n    },\n    getItemProps: function getItemProps(_ref5) {\n      if (_ref5 === void 0) {\n        _ref5 = {};\n      }\n\n      var _ref6 = _ref5,\n          item = _ref6.item,\n          index = _ref6.index,\n          onMouseMove = _ref6.onMouseMove,\n          onClick = _ref6.onClick,\n          rest = _objectWithoutPropertiesLoose(_ref6, [\"item\", \"index\", \"onMouseMove\", \"onClick\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      var itemProps = _extends({\n        role: 'option',\n        'aria-selected': \"\" + (itemIndex === highlightedIndex),\n        id: elementIds.current.getItemId(itemIndex)\n      }, rest);\n\n      if (!rest.disabled) {\n        itemProps.onMouseMove = callAllEventHandlers(onMouseMove, function () {\n          return itemHandleMouseMove(itemIndex);\n        });\n        itemProps.onClick = callAllEventHandlers(onClick, function () {\n          return itemHandleClick(itemIndex);\n        });\n      }\n\n      return itemProps;\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset\n      });\n    },\n    setInputValue: function setInputValue(newInputValue) {\n      dispatch({\n        type: FunctionSetInputValue,\n        inputValue: newInputValue\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n      inputId = _ref.inputId,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n\nvar defaultProps$2 = _extends({}, defaultProps, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, {}, changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends({}, defaultProps$2, {}, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      itemToString = props.itemToString,\n      environment = props.environment; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props); // Reducer init.\n\n  var _useEnhancedReducer = useEnhancedReducer(downshiftUseComboboxReducer, initialState, props),\n      _useEnhancedReducer$ = _useEnhancedReducer[0],\n      isOpen = _useEnhancedReducer$.isOpen,\n      highlightedIndex = _useEnhancedReducer$.highlightedIndex,\n      selectedItem = _useEnhancedReducer$.selectedItem,\n      inputValue = _useEnhancedReducer$.inputValue,\n      dispatchWithoutProps = _useEnhancedReducer[1];\n\n  var dispatch = function (action) {\n    return dispatchWithoutProps(_extends({\n      props: props\n    }, action));\n  };\n  /* Refs */\n\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = [];\n  var shouldScroll = useRef(true);\n  var isInitialMount = useRef(true);\n  var mouseAndTouchTrackers = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  var elementIds = useRef(getElementIds$1(props));\n  /* Effects */\n\n  /* Sets a11y status message on changes in isOpen. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11yStatusMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMount.current) {\n      return;\n    }\n\n    setStatus(getA11ySelectionMessage({\n      highlightedIndex: highlightedIndex,\n      inputValue: inputValue,\n      isOpen: isOpen,\n      itemToString: itemToString,\n      resultCount: items.length,\n      highlightedItem: items[highlightedIndex],\n      selectedItem: selectedItem\n    }), environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]);\n  /* Scroll on highlighted item if change comes from keyboard. */\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !itemRefs.current.length) {\n      return;\n    }\n\n    if (shouldScroll.current === false) {\n      shouldScroll.current = true;\n    } else {\n      scrollIntoView(itemRefs.current[highlightedIndex], menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMount.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  /* Make initial ref false. */\n\n  useEffect(function () {\n    isInitialMount.current = false;\n  }, []);\n  /* Add mouse/touch events to document. */\n\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackers.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackers.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, [comboboxRef.current, menuRef.current, toggleButtonRef.current], environment.document)) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackers.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackers.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackers.current.isTouchMove && !targetWithinDownshift(event.target, [comboboxRef.current, menuRef.current, toggleButtonRef.current], environment.document, false)) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n  });\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[index];\n  };\n  /* Event handler functions */\n\n\n  var inputKeyDownHandlers = {\n    ArrowDown: function ArrowDown(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownArrowDown,\n        shiftKey: event.shiftKey,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    ArrowUp: function ArrowUp(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownArrowUp,\n        shiftKey: event.shiftKey,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Home: function Home(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownHome,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    End: function End(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownEnd,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    },\n    Escape: function Escape() {\n      dispatch({\n        type: InputKeyDownEscape\n      });\n    },\n    Enter: function Enter(event) {\n      event.preventDefault();\n      dispatch({\n        type: InputKeyDownEnter,\n        getItemNodeFromIndex: getItemNodeFromIndex\n      });\n    }\n  }; // Event handlers.\n\n  var inputHandleKeyDown = function (event) {\n    var key = normalizeArrowKey(event);\n\n    if (key && inputKeyDownHandlers[key]) {\n      inputKeyDownHandlers[key](event);\n    }\n  };\n\n  var inputHandleChange = function (event) {\n    dispatch({\n      type: InputChange,\n      inputValue: event.target.value\n    });\n  };\n\n  var inputHandleBlur = function () {\n    /* istanbul ignore else */\n    if (!mouseAndTouchTrackers.current.isMouseDown) {\n      dispatch({\n        type: InputBlur\n      });\n    }\n  };\n\n  var menuHandleMouseLeave = function () {\n    dispatch({\n      type: MenuMouseLeave$1\n    });\n  };\n\n  var itemHandleMouseMove = function (index) {\n    if (index === highlightedIndex) {\n      return;\n    }\n\n    shouldScroll.current = false;\n    dispatch({\n      type: ItemMouseMove$1,\n      index: index\n    });\n  };\n\n  var itemHandleClick = function (index) {\n    dispatch({\n      type: ItemClick$1,\n      index: index\n    });\n  };\n\n  var toggleButtonHandleClick = function () {\n    dispatch({\n      type: ToggleButtonClick$1\n    });\n\n    if (!isOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }; // returns\n\n\n  return {\n    // prop getters.\n    getItemProps: function getItemProps(_ref3) {\n      var _extends3, _ref5;\n\n      if (_ref3 === void 0) {\n        _ref3 = {};\n      }\n\n      var _ref4 = _ref3,\n          item = _ref4.item,\n          index = _ref4.index,\n          _ref4$refKey = _ref4.refKey,\n          refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n          ref = _ref4.ref,\n          onMouseMove = _ref4.onMouseMove,\n          onClick = _ref4.onClick,\n          onPress = _ref4.onPress,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n      var itemIndex = getItemIndex(index, item, items);\n\n      if (itemIndex < 0) {\n        throw new Error('Pass either item or item index in getItemProps!');\n      }\n\n      var onSelectKey = 'onClick';\n      var customClickHandler = onClick;\n      return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n        if (itemNode) {\n          itemRefs.current.push(itemNode);\n        }\n      }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === highlightedIndex), _extends3.id = elementIds.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref5 = {\n        onMouseMove: callAllEventHandlers(onMouseMove, function () {\n          itemHandleMouseMove(itemIndex);\n        })\n      }, _ref5[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n        itemHandleClick(itemIndex);\n      }), _ref5), {}, rest);\n    },\n    getLabelProps: function getLabelProps(labelProps) {\n      return _extends({\n        id: elementIds.current.labelId,\n        htmlFor: elementIds.current.inputId\n      }, labelProps);\n    },\n    getMenuProps: function getMenuProps(_ref) {\n      var _extends2;\n\n      if (_ref === void 0) {\n        _ref = {};\n      }\n\n      var _ref2 = _ref,\n          onMouseLeave = _ref2.onMouseLeave,\n          _ref2$refKey = _ref2.refKey,\n          refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n          ref = _ref2.ref,\n          rest = _objectWithoutPropertiesLoose(_ref2, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n        menuRef.current = menuNode;\n      }), _extends2.id = elementIds.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIds.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n    },\n    getInputProps: function getInputProps(_ref8) {\n      var _extends5;\n\n      if (_ref8 === void 0) {\n        _ref8 = {};\n      }\n\n      var _ref9 = _ref8,\n          onKeyDown = _ref9.onKeyDown,\n          onChange = _ref9.onChange,\n          onInput = _ref9.onInput,\n          onBlur = _ref9.onBlur,\n          onChangeText = _ref9.onChangeText,\n          _ref9$refKey = _ref9.refKey,\n          refKey = _ref9$refKey === void 0 ? 'ref' : _ref9$refKey,\n          ref = _ref9.ref,\n          rest = _objectWithoutPropertiesLoose(_ref9, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n      /* istanbul ignore next (preact) */\n      var onChangeKey = 'onChange';\n      var eventHandlers = {};\n\n      if (!rest.disabled) {\n        var _eventHandlers;\n\n        eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n        inputRef.current = inputNode;\n      }), _extends5.id = elementIds.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.current.menuId, _extends5), isOpen && highlightedIndex > -1 && {\n        'aria-activedescendant': elementIds.current.getItemId(highlightedIndex)\n      }, {\n        'aria-labelledby': elementIds.current.labelId,\n        // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n        // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n        autoComplete: 'off',\n        value: inputValue\n      }, eventHandlers, {}, rest);\n    },\n    getComboboxProps: function getComboboxProps(_ref10) {\n      var _extends6;\n\n      if (_ref10 === void 0) {\n        _ref10 = {};\n      }\n\n      var _ref11 = _ref10,\n          _ref11$refKey = _ref11.refKey,\n          refKey = _ref11$refKey === void 0 ? 'ref' : _ref11$refKey,\n          ref = _ref11.ref,\n          rest = _objectWithoutPropertiesLoose(_ref11, [\"refKey\", \"ref\"]);\n\n      return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n        comboboxRef.current = comboboxNode;\n      }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIds.current.menuId, _extends6['aria-expanded'] = isOpen, _extends6), rest);\n    },\n    getToggleButtonProps: function getToggleButtonProps(_ref6) {\n      var _extends4;\n\n      if (_ref6 === void 0) {\n        _ref6 = {};\n      }\n\n      var _ref7 = _ref6,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          _ref7$refKey = _ref7.refKey,\n          refKey = _ref7$refKey === void 0 ? 'ref' : _ref7$refKey,\n          ref = _ref7.ref,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n      return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n        toggleButtonRef.current = toggleButtonNode;\n      }), _extends4.id = elementIds.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n        onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n      }), {}, rest);\n    },\n    // actions.\n    toggleMenu: function toggleMenu() {\n      dispatch({\n        type: FunctionToggleMenu$1\n      });\n    },\n    openMenu: function openMenu() {\n      dispatch({\n        type: FunctionOpenMenu$1\n      });\n    },\n    closeMenu: function closeMenu() {\n      dispatch({\n        type: FunctionCloseMenu$1\n      });\n    },\n    setHighlightedIndex: function setHighlightedIndex(newHighlightedIndex) {\n      dispatch({\n        type: FunctionSetHighlightedIndex$1,\n        highlightedIndex: newHighlightedIndex\n      });\n    },\n    setInputValue: function setInputValue(newInputValue) {\n      dispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: newInputValue\n      });\n    },\n    selectItem: function selectItem(newSelectedItem) {\n      dispatch({\n        type: FunctionSelectItem$1,\n        selectedItem: newSelectedItem\n      });\n    },\n    reset: function reset() {\n      dispatch({\n        type: FunctionReset$1\n      });\n    },\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useSelect };\n"]},"metadata":{},"sourceType":"module"}